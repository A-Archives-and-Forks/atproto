{
  "lexicon": 1,
  "id": "com.atproto.admin.defs",
  "defs": {
    "actionView": {
      "type": "object",
      "required": [
        "id",
        "action",
        "subject",
        "subjectBlobCids",
        "createdBy",
        "createdAt"
      ],
      "properties": {
        "id": { "type": "integer" },
        "action": { "type": "ref", "ref": "#actionType" },
        "durationInHours": {
          "type": "integer",
          "description": "Indicates how long this action was meant to be in effect before automatically expiring."
        },
        "subject": {
          "type": "union",
          "refs": ["#repoRef", "com.atproto.repo.strongRef"]
        },
        "subjectBlobCids": { "type": "array", "items": { "type": "string" } },
        "createLabelVals": { "type": "array", "items": { "type": "string" } },
        "negateLabelVals": { "type": "array", "items": { "type": "string" } },
        "comment": { "type": "string" },
        "createdBy": { "type": "string", "format": "did" },
        "createdAt": { "type": "string", "format": "datetime" },
        "reversal": { "type": "ref", "ref": "#actionReversal" },
        "meta": { "type": "ref", "ref": "#actionMeta" },
        "resolvedReportIds": { "type": "array", "items": { "type": "integer" } }
      }
    },
    "actionViewDetail": {
      "type": "object",
      "required": [
        "id",
        "action",
        "subject",
        "subjectBlobs",
        "createdBy",
        "createdAt",
        "resolvedReports"
      ],
      "properties": {
        "id": { "type": "integer" },
        "action": { "type": "ref", "ref": "#actionType" },
        "durationInHours": {
          "type": "integer",
          "description": "Indicates how long this action was meant to be in effect before automatically expiring."
        },
        "subject": {
          "type": "union",
          "refs": [
            "#repoView",
            "#repoViewNotFound",
            "#recordView",
            "#recordViewNotFound"
          ]
        },
        "subjectBlobs": {
          "type": "array",
          "items": { "type": "ref", "ref": "#blobView" }
        },
        "createLabelVals": { "type": "array", "items": { "type": "string" } },
        "negateLabelVals": { "type": "array", "items": { "type": "string" } },
        "comment": { "type": "string" },
        "createdBy": { "type": "string", "format": "did" },
        "createdAt": { "type": "string", "format": "datetime" },
        "reversal": { "type": "ref", "ref": "#actionReversal" },
        "resolvedReports": {
          "type": "array",
          "items": { "type": "ref", "ref": "#reportView" }
        }
      }
    },
    "actionViewCurrent": {
      "type": "object",
      "required": ["id", "action"],
      "properties": {
        "id": { "type": "integer" },
        "action": { "type": "ref", "ref": "#actionType" },
        "durationInHours": {
          "type": "integer",
          "description": "Indicates how long this action was meant to be in effect before automatically expiring."
        }
      }
    },
    "actionReversal": {
      "type": "object",
      "required": ["createdBy", "createdAt"],
      "properties": {
        "comment": { "type": "string" },
        "createdBy": { "type": "string", "format": "did" },
        "createdAt": { "type": "string", "format": "datetime" }
      }
    },
    "actionMeta": {
      "type": "object",
      "properties": {
        "resolveReportIds": { "type": "array", "items": { "type": "integer" } },
        "reportType": {
          "type": "ref",
          "ref": "com.atproto.moderation.defs#reasonType"
        }
      }
    },
    "actionType": {
      "type": "string",
      "knownValues": [
        "#takedown",
        "#flag",
        "#acknowledge",
        "#escalate",
        "#comment",
        "#label",
        "#revert",
        "#mute"
      ]
    },
    "takedown": {
      "type": "token",
      "description": "Moderation action type: Takedown. Indicates that content should not be served by the PDS."
    },
    "flag": {
      "type": "token",
      "description": "Moderation action type: Flag. Indicates that the content was reviewed and considered to violate PDS rules, but may still be served."
    },
    "acknowledge": {
      "type": "token",
      "description": "Moderation action type: Acknowledge. Indicates that the content was reviewed and not considered to violate PDS rules."
    },
    "escalate": {
      "type": "token",
      "description": "Moderation action type: Escalate. Indicates that the content has been flagged for additional review."
    },
    "comment": {
      "type": "token",
      "description": "Moderation action type: Comment. Indicates that no change is being made to the subject or associated reports, just a comment is being added by a human or automated moderator"
    },
    "label": {
      "type": "token",
      "description": "Moderation action type: Label. Indicates that labels associated with the subject are being changed."
    },
    "revert": {
      "type": "token",
      "description": "Moderation action type: Revert. Indicates that a previously taken action is being reversed."
    },
    "mute": {
      "type": "token",
      "description": "Moderation action type: Mute. Indicates that reports/other events on a subject can be muted for a period of time."
    },
    "report": {
      "type": "token",
      "description": "Moderation action type: Report. Indicates that a new report was received for the subject."
    },
    "reportView": {
      "type": "object",
      "required": [
        "id",
        "reasonType",
        "subject",
        "reportedBy",
        "createdAt",
        "resolvedByActionIds"
      ],
      "properties": {
        "id": { "type": "integer" },
        "reasonType": {
          "type": "ref",
          "ref": "com.atproto.moderation.defs#reasonType"
        },
        "comment": { "type": "string" },
        "subjectRepoHandle": { "type": "string" },
        "subject": {
          "type": "union",
          "refs": ["#repoRef", "com.atproto.repo.strongRef"]
        },
        "reportedBy": { "type": "string", "format": "did" },
        "createdAt": { "type": "string", "format": "datetime" },
        "resolvedByActionIds": {
          "type": "array",
          "items": { "type": "integer" }
        }
      }
    },
    "subjectStatusView": {
      "type": "object",
      "required": ["id", "subject", "updatedAt", "status"],
      "properties": {
        "id": { "type": "integer" },
        "subject": {
          "type": "union",
          "refs": ["#repoRef", "com.atproto.repo.strongRef"]
        },
        "updatedAt": { "type": "string", "format": "datetime" },
        "status": {
          "type": "ref",
          "ref": "#subjectStatusType"
        }
      }
    },
    "reportViewDetail": {
      "type": "object",
      "required": [
        "id",
        "reasonType",
        "subject",
        "reportedBy",
        "createdAt",
        "resolvedByActions"
      ],
      "properties": {
        "id": { "type": "integer" },
        "reasonType": {
          "type": "ref",
          "ref": "com.atproto.moderation.defs#reasonType"
        },
        "comment": { "type": "string" },
        "subject": {
          "type": "union",
          "refs": [
            "#repoView",
            "#repoViewNotFound",
            "#recordView",
            "#recordViewNotFound"
          ]
        },
        "subjectStatusView": {
          "type": "ref",
          "ref": "com.atproto.admin.defs#subjectStatusView"
        },
        "reportedBy": { "type": "string", "format": "did" },
        "createdAt": { "type": "string", "format": "datetime" },
        "resolvedByActions": {
          "type": "array",
          "items": { "type": "ref", "ref": "com.atproto.admin.defs#actionView" }
        }
      }
    },
    "repoView": {
      "type": "object",
      "required": [
        "did",
        "handle",
        "relatedRecords",
        "indexedAt",
        "moderation"
      ],
      "properties": {
        "did": { "type": "string", "format": "did" },
        "handle": { "type": "string", "format": "handle" },
        "email": { "type": "string" },
        "relatedRecords": { "type": "array", "items": { "type": "unknown" } },
        "indexedAt": { "type": "string", "format": "datetime" },
        "moderation": { "type": "ref", "ref": "#moderation" },
        "invitedBy": {
          "type": "ref",
          "ref": "com.atproto.server.defs#inviteCode"
        },
        "invitesDisabled": { "type": "boolean" },
        "inviteNote": { "type": "string" }
      }
    },
    "repoViewDetail": {
      "type": "object",
      "required": [
        "did",
        "handle",
        "relatedRecords",
        "indexedAt",
        "moderation"
      ],
      "properties": {
        "did": { "type": "string", "format": "did" },
        "handle": { "type": "string", "format": "handle" },
        "email": { "type": "string" },
        "relatedRecords": { "type": "array", "items": { "type": "unknown" } },
        "indexedAt": { "type": "string", "format": "datetime" },
        "moderation": { "type": "ref", "ref": "#moderationDetail" },
        "labels": {
          "type": "array",
          "items": { "type": "ref", "ref": "com.atproto.label.defs#label" }
        },
        "invitedBy": {
          "type": "ref",
          "ref": "com.atproto.server.defs#inviteCode"
        },
        "invites": {
          "type": "array",
          "items": {
            "type": "ref",
            "ref": "com.atproto.server.defs#inviteCode"
          }
        },
        "invitesDisabled": { "type": "boolean" },
        "inviteNote": { "type": "string" }
      }
    },
    "repoViewNotFound": {
      "type": "object",
      "required": ["did"],
      "properties": {
        "did": { "type": "string", "format": "did" }
      }
    },
    "repoRef": {
      "type": "object",
      "required": ["did"],
      "properties": {
        "did": { "type": "string", "format": "did" }
      }
    },
    "recordView": {
      "type": "object",
      "required": [
        "uri",
        "cid",
        "value",
        "blobCids",
        "indexedAt",
        "moderation",
        "repo"
      ],
      "properties": {
        "uri": { "type": "string", "format": "at-uri" },
        "cid": { "type": "string", "format": "cid" },
        "value": { "type": "unknown" },
        "blobCids": {
          "type": "array",
          "items": { "type": "string", "format": "cid" }
        },
        "indexedAt": { "type": "string", "format": "datetime" },
        "moderation": { "type": "ref", "ref": "#moderation" },
        "repo": { "type": "ref", "ref": "#repoView" }
      }
    },
    "recordViewDetail": {
      "type": "object",
      "required": [
        "uri",
        "cid",
        "value",
        "blobs",
        "indexedAt",
        "moderation",
        "repo"
      ],
      "properties": {
        "uri": { "type": "string", "format": "at-uri" },
        "cid": { "type": "string", "format": "cid" },
        "value": { "type": "unknown" },
        "blobs": {
          "type": "array",
          "items": { "type": "ref", "ref": "#blobView" }
        },
        "labels": {
          "type": "array",
          "items": { "type": "ref", "ref": "com.atproto.label.defs#label" }
        },
        "indexedAt": { "type": "string", "format": "datetime" },
        "moderation": { "type": "ref", "ref": "#moderationDetail" },
        "repo": { "type": "ref", "ref": "#repoView" }
      }
    },
    "recordViewNotFound": {
      "type": "object",
      "required": ["uri"],
      "properties": {
        "uri": { "type": "string", "format": "at-uri" }
      }
    },
    "moderation": {
      "type": "object",
      "properties": {
        "currentAction": { "type": "ref", "ref": "#actionViewCurrent" }
      }
    },
    "moderationDetail": {
      "type": "object",
      "required": ["actions"],
      "properties": {
        "actions": {
          "type": "array",
          "items": { "type": "ref", "ref": "#actionView" }
        },
        "subjectStatus": {
          "type": "ref",
          "ref": "#subjectStatusView"
        }
      }
    },
    "blobView": {
      "type": "object",
      "required": ["cid", "mimeType", "size", "createdAt"],
      "properties": {
        "cid": { "type": "string", "format": "cid" },
        "mimeType": { "type": "string" },
        "size": { "type": "integer" },
        "createdAt": { "type": "string", "format": "datetime" },
        "details": {
          "type": "union",
          "refs": ["#imageDetails", "#videoDetails"]
        },
        "moderation": { "type": "ref", "ref": "#moderation" }
      }
    },
    "imageDetails": {
      "type": "object",
      "required": ["width", "height"],
      "properties": {
        "width": { "type": "integer" },
        "height": { "type": "integer" }
      }
    },
    "videoDetails": {
      "type": "object",
      "required": ["width", "height", "length"],
      "properties": {
        "width": { "type": "integer" },
        "height": { "type": "integer" },
        "length": { "type": "integer" }
      }
    },
    "subjectStatusType": {
      "type": "string",
      "knownValues": [
        "#reported",
        "#resolved",
        "#takendown",
        "#acknowledged",
        "#muted"
      ]
    },
    "reported": {
      "type": "token",
      "description": "Moderation status of a subject: reported. Indicates that the subject was reported"
    },
    "resolved": {
      "type": "token",
      "description": "Moderation status of a subject: resolved. Indicates that the reports on the subject were marked as resolved "
    },
    "takendown": {
      "type": "token",
      "description": "Moderation status of a subject: takendown. Indicates that the subject was taken down"
    },
    "acknowledged": {
      "type": "token",
      "description": "Moderation status of a subject: acknowledged. Indicates that the reports on the subject were acknowledged by moderator"
    },
    "muted": {
      "type": "token",
      "description": "Moderation status of a subject: muted. Indicates that reports were muted by a moderator"
    },
    "escalated": {
      "type": "token",
      "description": "Moderation status of a subject: escalated. Indicates that reports were escalated by a moderator"
    }
  }
}
